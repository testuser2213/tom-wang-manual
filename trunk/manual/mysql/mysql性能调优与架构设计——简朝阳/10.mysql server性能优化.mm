<map version="0.8.1">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1302744582085" ID="Freemind_Link_1755801840" MODIFIED="1309530283328" TEXT="mysql server&#x6027;&#x80fd;&#x4f18;&#x5316;(tom.wang) &#xa;Follow&#xff1a;http://t.qq.com/superlinyzu">
<node CREATED="1309531799828" ID="_" MODIFIED="1309532974609" POSITION="right" TEXT="mysql&#x5b89;&#x88c5;&#x4f18;&#x5316;&#xa;1&#x3001;&#x6e90;&#x7801;&#x5305;&#x7684;&#x7f16;&#x8bd1;&#x53c2;&#x6570;&#x4e2d;&#x9ed8;&#x8ba4;&#x4f1a;&#x4ee5;Debug &#x6a21;&#x5f0f;&#x751f;&#x6210;&#x4e8c;&#x8fdb;&#x5236;&#x4ee3;&#x7801;&#xff0c;&#x800c;Debug &#x6a21;&#x5f0f;&#x7ed9;MySQL &#x5e26;&#x6765;&#x7684;&#x6027;&#x80fd;&#x635f;&#x5931;&#x662f;&#x6bd4;&#x8f83;&#x5927;&#x7684;&#xff0c;&#x6240;&#x4ee5;&#x5f53;&#x6211;&#x4eec;&#x7f16;&#x8bd1;&#x51c6;&#x5907;&#x5b89;&#x88c5;&#x7684;&#x4ea7;&#x54c1;&#x4ee3;&#x7801;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x4e00;&#x5b9a;&#x4e0d;&#x8981;&#x5fd8;&#x8bb0;&#x4f7f;&#x7528;&#x201c;&#x2014;without-debug&#x201d;&#x53c2;&#x6570;&#x7981;&#x7528;Debug &#x6a21;&#x5f0f;&#x3002;&#xa;2&#x3001;&#x800c;&#x201c;&#x2014;with-mysqld-ldflags&#x201d;&#x548c;&#x201c;&#x2014;with-client-ldflags&#x201d;&#x4e24;&#x4e2a;&#x7f16;&#x8bd1;&#x53c2;&#x6570;&#x5982;&#x679c;&#x8bbe;&#x7f6e;&#x4e3a;&#x201c;-all-static&#x201d;&#x7684;&#x8bdd;&#xff0c;&#x53ef;&#x4ee5;&#x544a;&#x8bc9;&#x7f16;&#x8bd1;&#x5668;&#x4ee5;&#x9759;&#x6001;&#x65b9;&#x5f0f;&#x7f16;&#x8bd1;&#x6765;&#x4f7f;&#x7f16;&#x8bd1;&#x7ed3;&#x679c;&#x4ee3;&#x7801;&#x5f97;&#x5230;&#x6700;&#x9ad8;&#x7684;&#x6027;&#x80fd;&#x3002;&#x4f7f;&#x7528;&#x9759;&#x6001;&#x7f16;&#x8bd1;&#x548c;&#x52a8;&#x6001;&#x65b9;&#x5f0f;&#x7f16;&#x8bd1;&#x7684;&#x4ee3;&#x7801;&#x76f8;&#x6bd4;&#xff0c;&#x6027;&#x80fd;&#x5dee;&#x8ddd;&#x53ef;&#x80fd;&#x4f1a;&#x8fbe;&#x5230;5%&#x5230;10%&#x4e4b;&#x591a;&#x3002;"/>
<node CREATED="1309532981062" ID="Freemind_Link_541368124" MODIFIED="1309679514718" POSITION="right" TEXT="mysql&#x65e5;&#x5fd7;&#x8bbe;&#x7f6e;&#x4f18;&#x5316;&#xa;1&#x3001;&#x5728;&#x9ed8;&#x8ba4;&#x60c5;&#x51b5;&#x4e0b;&#xff0c;&#x7cfb;&#x7edf;&#x4ec5;&#x4ec5;&#x6253;&#x5f00;&#x9519;&#x8bef;&#x65e5;&#x5fd7;&#xff0c;&#x5173;&#x95ed;&#x4e86;&#x5176;&#x4ed6;&#x6240;&#x6709;&#x65e5;&#x5fd7;&#xff0c;&#x4ee5;&#x8fbe;&#x5230;&#x5c3d;&#x53ef;&#x80fd;&#x51cf;&#x5c11;IO &#x635f;&#x8017;&#x63d0;&#x9ad8;&#x7cfb;&#x7edf;&#x6027;&#x80fd;&#x7684;&#x76ee;&#x7684;&#x3002;&#x4f46;&#x662f;&#x5728;&#x4e00;&#x822c;&#x7a0d;&#x5fae;&#x91cd;&#x8981;&#x4e00;&#x70b9;&#x7684;&#x5b9e;&#x9645;&#x5e94;&#x7528;&#x573a;&#x666f;&#x4e2d;&#xff0c;&#x90fd;&#x81f3;&#x5c11;&#x9700;&#x8981;&#x6253;&#x5f00;&#x4e8c;&#x8fdb;&#x5236;&#x65e5;&#x5fd7;&#xff0c;&#x56e0;&#x4e3a;&#x8fd9;&#x662f;MySQL&#x5f88;&#x591a;&#x5b58;&#x50a8;&#x5f15;&#x64ce;&#x8fdb;&#x884c;&#x589e;&#x91cf;&#x5907;&#x4efd;&#x7684;&#x57fa;&#x7840;&#xff0c;&#x4e5f;&#x662f;MySQL &#x5b9e;&#x73b0;&#x590d;&#x5236;&#x7684;&#x57fa;&#x672c;&#x6761;&#x4ef6;&#x3002;&#x6709;&#x65f6;&#x5019;&#x4e3a;&#x4e86;&#x8fdb;&#x4e00;&#x6b65;&#x7684;&#x6027;&#x80fd;&#x4f18;&#x5316;&#xff0c;&#x5b9a;&#x4f4d;&#x6267;&#x884c;&#x8f83;&#x6162;&#x7684;SQL &#x8bed;&#x53e5;&#xff0c;&#x5f88;&#x591a;&#x7cfb;&#x7edf;&#x4e5f;&#x4f1a;&#x6253;&#x5f00;&#x6162;&#x67e5;&#x8be2;&#x65e5;&#x5fd7;&#x6765;&#x8bb0;&#x5f55;&#x6267;&#x884c;&#x65f6;&#x95f4;&#x8d85;&#x8fc7;&#x7279;&#x5b9a;&#x6570;&#x503c;&#xff08;&#x7531;&#x6211;&#x4eec;&#x81ea;&#x884c;&#x8bbe;&#x7f6e;&#xff09;&#x7684;SQL &#x8bed;&#x53e5;&#x3002;&#xa;2&#x3001;Binlog &#x76f8;&#x5173;&#x53c2;&#x6570;&#x53ca;&#x4f18;&#x5316;&#x7b56;&#x7565;&#xa;&#xff08;1&#xff09;&#x3001;&#x6211;&#x4eec;&#x9996;&#x5148;&#x770b;&#x770b;Binlog &#x7684;&#x76f8;&#x5173;&#x53c2;&#x6570;&#xff0c;&#x901a;&#x8fc7;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x547d;&#x4ee4;&#x53ef;&#x4ee5;&#x83b7;&#x5f97;&#x5173;&#x4e8e;Binlog &#x7684;&#x76f8;&#x5173;&#x53c2;&#x6570;&#x3002;&#x5f53;&#x7136;&#xff0c;&#x5176;&#x4e2d;&#x4e5f;&#x663e;&#x793a;&#x51fa;&#x4e86;&#x201c; innodb_locks_unsafe_for_binlog&#x201d;&#x8fd9;&#x4e2a;Innodb &#x5b58;&#x50a8;&#x5f15;&#x64ce;&#x7279;&#x6709;&#x7684;&#x4e0e;Binlog &#x76f8;&#x5173;&#x7684;&#x53c2;&#x6570;&#xff1a;&#xa;mysql&gt; show variables like &apos;%binlog%&apos;;&#xa;&#xff08;2&#xff09;&#x3001;&#x201c;binlog_cache_size&quot;&#xff1a;&#x5728;&#x4e8b;&#x52a1;&#x8fc7;&#x7a0b;&#x4e2d;&#x5bb9;&#x7eb3;&#x4e8c;&#x8fdb;&#x5236;&#x65e5;&#x5fd7;SQL &#x8bed;&#x53e5;&#x7684;&#x7f13;&#x5b58;&#x5927;&#x5c0f;&#x3002;&#x4e8c;&#x8fdb;&#x5236;&#x65e5;&#x5fd7;&#x7f13;&#x5b58;&#x662f;&#x670d;&#x52a1;&#x5668;&#x652f;&#x6301;&#x4e8b;&#x52a1;&#x5b58;&#x50a8;&#x5f15;&#x64ce;&#x5e76;&#x4e14;&#x670d;&#x52a1;&#x5668;&#x542f;&#x7528;&#x4e86;&#x4e8c;&#x8fdb;&#x5236;&#x65e5;&#x5fd7;(&#x2014;log-bin &#x9009;&#x9879;)&#x7684;&#x524d;&#x63d0;&#x4e0b;&#x4e3a;&#x6bcf;&#x4e2a;&#x5ba2;&#x6237;&#x7aef;&#x5206;&#x914d;&#x7684;&#x5185;&#x5b58;&#xff0c;&#x6ce8;&#x610f;&#xff0c;&#x662f;&#x6bcf;&#x4e2a;Client &#x90fd;&#x53ef;&#x4ee5;&#x5206;&#x914d;&#x8bbe;&#x7f6e;&#x5927;&#x5c0f;&#x7684;binlog cache &#x7a7a;&#x95f4;&#x3002;&#x5982;&#x679c;&#x8bfb;&#x8005;&#x670b;&#x53cb;&#x7684;&#x7cfb;&#x7edf;&#x4e2d;&#x7ecf;&#x5e38;&#x4f1a;&#x51fa;&#x73b0;&#x591a;&#x8bed;&#x53e5;&#x4e8b;&#x52a1;&#x7684;&#x8bdd;&#xff0c;&#x53ef;&#x4ee5;&#x5c1d;&#x8bd5;&#x589e;&#x52a0;&#x8be5;&#x503c;&#x7684;&#x5927;&#x5c0f;&#xff0c;&#x4ee5;&#x83b7;&#x5f97;&#x66f4;&#x9ad8;&#x7684;&#x6027;&#x80fd;&#x3002;&#x5f53;&#x7136;&#xff0c;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;MySQL &#x7684;&#x4ee5;&#x4e0b;&#x4e24;&#x4e2a;&#x72b6;&#x6001;&#x53d8;&#x91cf;&#x6765;&#x5224;&#x65ad;&#x5f53;&#x524d;&#x7684;binlog_cache_size &#x7684;&#x72b6;&#x51b5;&#xff1a;Binlog_cache_use &#x548c;Binlog_cache_disk_use&#x3002;&#xa;&#xff08;3&#xff09;&#x3001;&#x201c;max_binlog_cache_size&#x201d;&#xff1a;&#x548c;&quot;binlog_cache_size&quot;&#x76f8;&#x5bf9;&#x5e94;&#xff0c;&#x4f46;&#x662f;&#x6240;&#x4ee3;&#x8868;&#x7684;&#x662f;binlog &#x80fd;&#x591f;&#x4f7f;&#x7528;&#x7684;&#x6700;&#x5927;cache &#x5185;&#x5b58;&#x5927;&#x5c0f;&#x3002;&#x5f53;&#x6211;&#x4eec;&#x6267;&#x884c;&#x591a;&#x8bed;&#x53e5;&#x4e8b;&#x52a1;&#x7684;&#x65f6;&#x5019;&#xff0c;max_binlog_cache_size &#x5982;&#x679c;&#x4e0d;&#x591f;&#x5927;&#x7684;&#x8bdd;&#xff0c;&#x7cfb;&#x7edf;&#x53ef;&#x80fd;&#x4f1a;&#x62a5;&#x51fa;&#x201c; Multi-statement transaction required more than &apos;max_binlog_cache_size&apos; bytes of storage&#x201d;&#x7684;&#x9519;&#x8bef;&#x3002;&#xa;&#xff08;4&#xff09;&#x3001;&#x201c;max_binlog_size&#x201d;&#xff1a;Binlog &#x65e5;&#x5fd7;&#x6700;&#x5927;&#x503c;&#xff0c;&#x4e00;&#x822c;&#x6765;&#x8bf4;&#x8bbe;&#x7f6e;&#x4e3a;512M &#x6216;&#x8005;1G&#xff0c;&#x4f46;&#x4e0d;&#x80fd;&#x8d85;&#x8fc7;1G&#x3002;&#x8be5;&#x5927;&#x5c0f;&#x5e76;&#x4e0d;&#x80fd;&#x975e;&#x5e38;&#x4e25;&#x683c;&#x63a7;&#x5236;Binlog &#x5927;&#x5c0f;&#xff0c;&#x5c24;&#x5176;&#x662f;&#x5f53;&#x5230;&#x8fbe;Binlog &#x6bd4;&#x8f83;&#x9760;&#x8fd1;&#x5c3e;&#x90e8;&#x800c;&#x53c8;&#x9047;&#x5230;&#x4e00;&#x4e2a;&#x8f83;&#x5927;&#x4e8b;&#x52a1;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x7cfb;&#x7edf;&#x4e3a;&#x4e86;&#x4fdd;&#x8bc1;&#x4e8b;&#x52a1;&#x7684;&#x5b8c;&#x6574;&#x6027;&#xff0c;&#x4e0d;&#x53ef;&#x80fd;&#x505a;&#x5207;&#x6362;&#x65e5;&#x5fd7;&#x7684;&#x52a8;&#x4f5c;&#xff0c;&#x53ea;&#x80fd;&#x5c06;&#x8be5;&#x4e8b;&#x52a1;&#x7684;&#x6240;&#x6709;SQL &#x90fd;&#x8bb0;&#x5f55;&#x8fdb;&#x5165;&#x5f53;&#x524d;&#x65e5;&#x5fd7;&#xff0c;&#x76f4;&#x5230;&#x8be5;&#x4e8b;&#x52a1;&#x7ed3;&#x675f;&#x3002;&#xa;&#xff08;5&#xff09;&#x3001;&#x201c;sync_binlog&#x201d;&#xff1a;&#x8fd9;&#x4e2a;&#x53c2;&#x6570;&#x662f;&#x5bf9;&#x4e8e;MySQL &#x7cfb;&#x7edf;&#x6765;&#x8bf4;&#x662f;&#x81f3;&#x5173;&#x91cd;&#x8981;&#x7684;&#xff0c;&#x4ed6;&#x4e0d;&#x4ec5;&#x5f71;&#x54cd;&#x5230;Binlog &#x5bf9;MySQL &#x6240;&#x5e26;&#x6765;&#x7684;&#x6027;&#x80fd;&#x635f;&#x8017;&#xff0c;&#x800c;&#x4e14;&#x8fd8;&#x5f71;&#x54cd;&#x5230;MySQL &#x4e2d;&#x6570;&#x636e;&#x7684;&#x5b8c;&#x6574;&#x6027;&#x3002;&#x5bf9;&#x4e8e;&#x201c;sync_binlog&#x201d;&#x53c2;&#x6570;&#x7684;&#x5404;&#x79cd;&#x8bbe;&#x7f6e;&#x7684;&#x8bf4;&#x660e;&#x5982;&#x4e0b;&#xff1a;&#xa;&#x25cf; sync_binlog=0&#xff0c;&#x5f53;&#x4e8b;&#x52a1;&#x63d0;&#x4ea4;&#x4e4b;&#x540e;&#xff0c;MySQL &#x4e0d;&#x505a;fsync &#x4e4b;&#x7c7b;&#x7684;&#x78c1;&#x76d8;&#x540c;&#x6b65;&#x6307;&#x4ee4;&#x5237;&#x65b0;binlog_cache &#x4e2d;&#x7684;&#x4fe1;&#x606f;&#x5230;&#x78c1;&#x76d8;&#xff0c;&#x800c;&#x8ba9;Filesystem &#x81ea;&#x884c;&#x51b3;&#x5b9a;&#x4ec0;&#x4e48;&#x65f6;&#x5019;&#x6765;&#x505a;&#x540c;&#x6b65;&#xff0c;&#x6216;&#x8005;cache &#x6ee1;&#x4e86;&#x4e4b;&#x540e;&#x624d;&#x540c;&#x6b65;&#x5230;&#x78c1;&#x76d8;&#x3002;&#xa;&#x25cf; sync_binlog=n&#xff0c;&#x5f53;&#x6bcf;&#x8fdb;&#x884c;n &#x6b21;&#x4e8b;&#x52a1;&#x63d0;&#x4ea4;&#x4e4b;&#x540e;&#xff0c;MySQL &#x5c06;&#x8fdb;&#x884c;&#x4e00;&#x6b21;fsync &#x4e4b;&#x7c7b;&#x7684;&#x78c1;&#x76d8;&#x540c;&#x6b65;&#x6307;&#x4ee4;&#x6765;&#x5c06;binlog_cache &#x4e2d;&#x7684;&#x6570;&#x636e;&#x5f3a;&#x5236;&#x5199;&#x5165;&#x78c1;&#x76d8;&#x3002;&#xa;&#xff08;6&#xff09;&#x3001;&#x5927;&#x5bb6;&#x90fd;&#x77e5;&#x9053;&#xff0c;MySQL &#x7684;&#x590d;&#x5236;&#xff08;Replication&#xff09;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x5c31;&#x662f;&#x901a;&#x8fc7;&#x5c06;Master &#x7aef;&#x7684;Binlog &#x901a;&#x8fc7;&#x5229;&#x7528;IO &#x7ebf;&#x7a0b;&#x901a;&#x8fc7;&#x7f51;&#x7edc;&#x590d;&#x5236;&#x5230;Slave &#x7aef;&#xff0c;&#x7136;&#x540e;&#x518d;&#x901a;&#x8fc7;SQL &#x7ebf;&#x7a0b;&#x89e3;&#x6790;Binlog &#x4e2d;&#x7684;&#x65e5;&#x5fd7;&#x518d;&#x5e94;&#x7528;&#x5230;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x6765;&#x5b9e;&#x73b0;&#x7684;&#x3002;&#x6240;&#x4ee5;&#xff0c;Binlog &#x91cf;&#x7684;&#x5927;&#x5c0f;&#x5bf9;IO &#x7ebf;&#x7a0b;&#x4ee5;&#x53ca;Msater &#x548c;Slave &#x7aef;&#x4e4b;&#x95f4;&#x7684;&#x7f51;&#x7edc;&#x90fd;&#x4f1a;&#x4ea7;&#x751f;&#x76f4;&#x63a5;&#x7684;&#x5f71;&#x54cd;&#x3002;&#xa;3&#x3001;MySQL &#x4e2d;Binlog &#x7684;&#x4ea7;&#x751f;&#x91cf;&#x662f;&#x6ca1;&#x529e;&#x6cd5;&#x6539;&#x53d8;&#x7684;&#xff0c;&#x53ea;&#x8981;&#x6211;&#x4eec;&#x7684;Query &#x6539;&#x53d8;&#x4e86;&#x6570;&#x636e;&#x5e93;&#x4e2d;&#x7684;&#x6570;&#x636e;&#xff0c;&#x90a3;&#x4e48;&#x5c31;&#x5fc5;&#x987b;&#x5c06;&#x8be5;Query &#x6240;&#x5bf9;&#x5e94;&#x7684;Event &#x8bb0;&#x5f55;&#x5230;Binlog &#x4e2d;&#x3002;&#x90a3;&#x6211;&#x4eec;&#x662f;&#x4e0d;&#x662f;&#x5c31;&#x6ca1;&#x6709;&#x529e;&#x6cd5;&#x4f18;&#x5316;&#x590d;&#x5236;&#x4e86;&#x5462;&#xff1f;&#x5f53;&#x7136;&#x4e0d;&#x662f;&#xff0c;&#x5728;MySQL &#x590d;&#x5236;&#x73af;&#x5883;&#x4e2d;&#xff0c;&#x5b9e;&#x9645;&#x4e0a;&#x662f;&#x6709;8 &#x4e2a;&#x53c2;&#x6570;&#x53ef;&#x4ee5;&#x8ba9;&#x6211;&#x4eec;&#x63a7;&#x5236;&#x9700;&#x8981;&#x590d;&#x5236;&#x6216;&#x8005;&#x9700;&#x8981;&#x5ffd;&#x7565;&#x800c;&#x4e0d;&#x8fdb;&#x884c;&#x590d;&#x5236;&#x7684;DB &#x6216;&#x8005;Table &#x7684;&#xff0c;&#x5206;&#x522b;&#x4e3a;&#xff1a;&#xa;&#x25cf; Binlog_Do_DB&#xff1a;&#x8bbe;&#x5b9a;&#x54ea;&#x4e9b;&#x6570;&#x636e;&#x5e93;&#xff08;Schema&#xff09;&#x9700;&#x8981;&#x8bb0;&#x5f55;Binlog&#xff1b;&#xa;&#x25cf; Binlog_Ignore_DB&#xff1a;&#x8bbe;&#x5b9a;&#x54ea;&#x4e9b;&#x6570;&#x636e;&#x5e93;&#xff08;Schema&#xff09;&#x4e0d;&#x8981;&#x8bb0;&#x5f55;Binlog&#xff1b;&#xa;&#x25cf; Replicate_Do_DB&#xff1a;&#x8bbe;&#x5b9a;&#x9700;&#x8981;&#x590d;&#x5236;&#x7684;&#x6570;&#x636e;&#x5e93;&#xff08;Schema&#xff09;&#xff0c;&#x591a;&#x4e2a;DB &#x7528;&#x9017;&#x53f7;&#xff08;&#x201c;,&#x201d;&#xff09;&#x5206;&#x9694;&#xff1b;&#xa;&#x25cf; Replicate_Ignore_DB&#xff1a;&#x8bbe;&#x5b9a;&#x53ef;&#x4ee5;&#x5ffd;&#x7565;&#x7684;&#x6570;&#x636e;&#x5e93;&#xff08;Schema&#xff09;&#xff1b;&#xa;&#x25cf; Replicate_Do_Table&#xff1a;&#x8bbe;&#x5b9a;&#x9700;&#x8981;&#x590d;&#x5236;&#x7684;Table&#xff1b;&#xa;&#x25cf; Replicate_Ignore_Table&#xff1a;&#x8bbe;&#x5b9a;&#x53ef;&#x4ee5;&#x5ffd;&#x7565;&#x7684;Table&#xff1b;&#xa;&#x25cf; Replicate_Wild_Do_Table&#xff1a;&#x529f;&#x80fd;&#x540c;Replicate_Do_Table&#xff0c;&#x4f46;&#x53ef;&#x4ee5;&#x5e26;&#x901a;&#x914d;&#x7b26;&#x6765;&#x8fdb;&#x884c;&#x8bbe;&#x7f6e;&#xff1b;&#xa;&#x25cf; Replicate_Wild_Ignore_Table&#xff1a;&#x529f;&#x80fd;&#x540c;Replicate_Ignore_Table&#xff0c;&#x53ef;&#x5e26;&#x901a;&#x914d;&#x7b26;&#x8bbe;&#x7f6e;&#xff1b;&#xa;&#x5b9e;&#x9645;&#x4e0a;&#xff0c;&#x4e0a;&#x9762;&#x8fd9;&#x516b;&#x4e2a;&#x53c2;&#x6570;&#x4e2d;&#x7684;&#x524d;&#x9762;&#x4e24;&#x4e2a;&#x662f;&#x8bbe;&#x7f6e;&#x5728;Master &#x7aef;&#x7684;&#xff0c;&#x800c;&#x540e;&#x9762;&#x516d;&#x4e2a;&#x53c2;&#x6570;&#x5219;&#x662f;&#x8bbe;&#x7f6e;&#x5728;Slave &#x7aef;&#x7684;&#x3002;&#x867d;&#x7136;&#x524d;&#x9762;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x548c;&#x540e;&#x9762;&#x516d;&#x4e2a;&#x53c2;&#x6570;&#x5728;&#x529f;&#x80fd;&#x4e0a;&#x5e76;&#x6ca1;&#x6709;&#x975e;&#x5e38;&#x76f4;&#x63a5;&#x7684;&#x5173;&#x7cfb;&#xff0c;&#x4f46;&#x662f;&#x5bf9;&#x4e8e;&#x4f18;&#x5316;MySQL &#x7684;Replication &#x6765;&#x8bf4;&#x90fd;&#x53ef;&#x4ee5;&#x8d77;&#x5230;&#x76f8;&#x4f3c;&#x7684;&#x529f;&#x80fd;&#x3002;&#xa;4&#x3001;Slow Query Log &#x76f8;&#x5173;&#x53c2;&#x6570;&#x53ca;&#x4f7f;&#x7528;&#x5efa;&#x8bae;&#xa;&#xff08;1&#xff09;&#x3001;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x5982;&#x4e0b;&#x67e5;&#x770b;&#x7cfb;&#x7edf;&#x6162;&#x67e5;&#x8be2;&#x65e5;&#x5fd7;&#x7684;&#x76f8;&#x5173;&#x8bbe;&#x7f6e;&#xff1a;&#xa;mysql&gt; show variables like &apos;log_slow%&apos;;&#xa;mysql&gt; show variables like &apos;long_query%&apos;;&#xa;&#xff08;2&#xff09;&#x3001;&#x201c; log_slow_queries &#x201d; &#x53c2;&#x6570;&#x663e;&#x793a;&#x4e86;&#x7cfb;&#x7edf;&#x662f;&#x5426;&#x5df2;&#x7ecf;&#x6253;&#x5f00;Slow Query Log &#x529f;&#x80fd;&#xff0c; &#x800c;&#x201c;long_query_time&#x201d;&#x53c2;&#x6570;&#x5219;&#x544a;&#x8bc9;&#x6211;&#x4eec;&#x5f53;&#x524d;&#x7cfb;&#x7edf;&#x8bbe;&#x7f6e;&#x7684;Slow Query &#x8bb0;&#x5f55;&#x6267;&#x884c;&#x65f6;&#x95f4;&#x8d85;&#x8fc7;&#x591a;&#x957f;&#x7684;Query&#x3002;&#x5728;MySQL AB &#x53d1;&#x884c;&#x7684;MySQL &#x7248;&#x672c;&#x4e2d;Slow Query Log &#x53ef;&#x4ee5;&#x8bbe;&#x7f6e;&#x7684;&#x6700;&#x77ed;&#x6162;&#x67e5;&#x8be2;&#x65f6;&#x95f4;&#x4e3a;1 &#x79d2;&#xff0c;&#x8fd9;&#x5728;&#x6709;&#x4e9b;&#x65f6;&#x5019;&#x53ef;&#x80fd;&#x6ca1;&#x529e;&#x6cd5;&#x5b8c;&#x5168;&#x6ee1;&#x8db3;&#x6211;&#x4eec;&#x7684;&#x8981;&#x6c42;&#xff0c;&#x5982;&#x679c;&#x5e0c;&#x671b;&#x80fd;&#x591f;&#x8fdb;&#x4e00;&#x6b65;&#x7f29;&#x77ed;&#x6162;&#x67e5;&#x8be2;&#x7684;&#x65f6;&#x95f4;&#x9650;&#x5236;&#xff0c;&#x53ef;&#x4ee5;&#x4f7f;&#x7528;Percona &#x63d0;&#x4f9b;&#x7684;microslow-patch&#xff08;&#x7b80;&#x79f0;&#x4e3a;msl Patch&#xff09;&#x6765;&#x7a81;&#x7834;&#x8be5;&#x9650;&#x5236;&#x3002;msl patch &#x4e0d;&#x4ec5;&#x4ec5;&#x80fd;&#x5c06;&#x6162;&#x67e5;&#x8be2;&#x65f6;&#x95f4;&#x51cf;&#x5c0f;&#x5230;&#x6beb;&#x79d2;&#x7ea7;&#x522b;&#xff0c;&#x540c;&#x65f6;&#x8fd8;&#x80fd;&#x901a;&#x8fc7;&#x4e00;&#x4e9b;&#x7279;&#x5b9a;&#x7684;&#x89c4;&#x5219;&#x6765;&#x8fc7;&#x6ee4;&#x8bb0;&#x5f55;&#x7684;SQL&#xff0c;&#x5982;&#x4ec5;&#x8bb0;&#x5f55;&#x6d89;&#x53ca;&#x5230;&#x67d0;&#x4e2a;&#x8868;&#x7684;Slow Query &#x7b49;&#x7b49;&#x9644;&#x52a0;&#x529f;&#x80fd;&#x3002;&#xff08;http://www.mysqlperformanceblog.com/2008/04/20/updated-msl-microslow-patchinstallation-&#xa;walk-through/&#xff09;"/>
<node CREATED="1309679522843" ID="Freemind_Link_1039815495" MODIFIED="1309680928140" POSITION="right" TEXT="Query Cache &#x4f18;&#x5316;&#xa;1&#x3001;MySQL &#x7684;Query Cache &#x5b9e;&#x73b0;&#x539f;&#x7406;&#x5b9e;&#x9645;&#x4e0a;&#x5e76;&#x4e0d;&#x662f;&#x7279;&#x522b;&#x7684;&#x590d;&#x6742;&#xff0c;&#x7b80;&#x5355;&#x7684;&#x6765;&#x8bf4;&#x5c31;&#x662f;&#x5c06;&#x5ba2;&#x6237;&#x7aef;&#x8bf7;&#x6c42;&#x7684;Query&#x8bed;&#x53e5;&#xff08;&#x5f53;&#x7136;&#x4ec5;&#x9650;&#x4e8e;SELECT &#x7c7b;&#x578b;&#x7684;Query&#xff09;&#x901a;&#x8fc7;&#x4e00;&#x5b9a;&#x7684;hash &#x7b97;&#x6cd5;&#x8fdb;&#x884c;&#x4e00;&#x4e2a;&#x8ba1;&#x7b97;&#x800c;&#x5f97;&#x5230;&#x4e00;&#x4e2a;hash &#x503c;&#xff0c;&#x5b58;&#x653e;&#x5728;&#x4e00;&#x4e2a;hash &#x6876;&#x4e2d;&#x3002;&#x540c;&#x65f6;&#x5c06;&#x8be5;Query &#x7684;&#x7ed3;&#x679c;&#x96c6;&#xff08;Result Set&#xff09;&#x4e5f;&#x5b58;&#x653e;&#x5728;&#x4e00;&#x4e2a;&#x5185;&#x5b58;Cache &#x4e2d;&#x7684;&#x3002;&#x5b58;&#x653e;Query hash &#x503c;&#x7684;&#x94fe;&#x8868;&#x4e2d;&#x7684;&#x6bcf;&#x4e00;&#x4e2a;hash &#x503c;&#x6240;&#x5728;&#x7684;&#x8282;&#x70b9;&#x4e2d;&#x540c;&#x65f6;&#x8fd8;&#x5b58;&#x653e;&#x4e86;&#x8be5;Query &#x6240;&#x5bf9;&#x5e94;&#x7684;Result Set &#x7684;Cache &#x6240;&#x5728;&#x7684;&#x5185;&#x5b58;&#x5730;&#x5740;&#xff0c;&#x4ee5;&#x53ca;&#x8be5;Query &#x6240;&#x6d89;&#x53ca;&#x5230;&#x7684;&#x6240;&#x6709;Table &#x7684;&#x6807;&#x8bc6;&#x7b49;&#x5176;&#x4ed6;&#x4e00;&#x4e9b;&#x76f8;&#x5173;&#x4fe1;&#x606f;&#x3002;&#x7cfb;&#x7edf;&#x63a5;&#x53d7;&#x5230;&#x4efb;&#x4f55;&#x4e00;&#x4e2a;SELECT &#x7c7b;&#x578b;&#x7684;Query &#x7684;&#x65f6;&#x5019;&#xff0c;&#x9996;&#x5148;&#x8ba1;&#x7b97;&#x51fa;&#x5176;hash &#x503c;&#xff0c;&#x7136;&#x540e;&#x901a;&#x8fc7;&#x8be5;hash &#x503c;&#x5230;Query Cache &#x4e2d;&#x53bb;&#x5339;&#x914d;&#xff0c;&#x5982;&#x679c;&#x627e;&#x5230;&#x4e86;&#x5b8c;&#x5168;&#x76f8;&#x540c;&#x7684;Query&#xff0c;&#x5219;&#x76f4;&#x63a5;&#x5c06;&#x4e4b;&#x524d;&#x6240;Cache &#x7684;Result Set &#x8fd4;&#x56de;&#x7ed9;&#x5ba2;&#x6237;&#x7aef;&#x800c;&#x5b8c;&#x5168;&#x4e0d;&#x9700;&#x8981;&#x8fdb;&#x884c;&#x540e;&#x9762;&#x7684;&#x4efb;&#x4f55;&#x6b65;&#x9aa4;&#x5373;&#x53ef;&#x5b8c;&#x6210;&#x8fd9;&#x6b21;&#x8bf7;&#x6c42;&#x3002;&#x800c;&#x540e;&#x7aef;&#x7684;&#x4efb;&#x4f55;&#x4e00;&#x4e2a;&#x8868;&#x7684;&#x4efb;&#x4f55;&#x4e00;&#x6761;&#x6570;&#x636e;&#x53d1;&#x751f;&#x53d8;&#x5316;&#x4e4b;&#x540e;&#xff0c;&#x4e5f;&#x4f1a;&#x901a;&#x77e5;Query Cache&#xff0c;&#x9700;&#x8981;&#x5c06;&#x6240;&#x6709;&#x4e0e;&#x8be5;Table &#x6709;&#x5173;&#x7684;Query &#x7684;Cache &#x5168;&#x90e8;&#x5931;&#x6548;&#xff0c;&#x5e76;&#x91ca;&#x653e;&#x51fa;&#x4e4b;&#x524d;&#x5360;&#x7528;&#x7684;&#x5185;&#x5b58;&#x5730;&#x5740;&#xff0c;&#x4ee5;&#x4fbf;&#x540e;&#x9762;&#x5176;&#x4ed6;&#x7684;Query &#x80fd;&#x591f;&#x4f7f;&#x7528;&#x3002;&#xa;2&#x3001;&#x9002;&#x5ea6;&#x4f7f;&#x7528;Query Cache&#xa;&#xff08;1&#xff09;&#x3001;&#x5e94;&#x8be5;&#x907f;&#x514d;&#x5728;&#x67e5;&#x8be2;&#x53d8;&#x5316;&#x9891;&#x7e41;&#x7684;Table &#x7684;Query &#x4e0a;&#x4f7f;&#x7528;&#xff0c;&#x800c;&#x5e94;&#x8be5;&#x5728;&#x90a3;&#x4e9b;&#x67e5;&#x8be2;&#x53d8;&#x5316;&#x9891;&#x7387;&#x8f83;&#x5c0f;&#x7684;Table &#x7684;Query &#x4e0a;&#x9762;&#x4f7f;&#x7528;&#x3002;MySQL &#x4e2d;&#x9488;&#x5bf9;Query Cache &#x6709;&#x4e24;&#x4e2a;&#x4e13;&#x7528;&#x7684;SQL Hint&#xff08;&#x63d0;&#x793a;&#xff09;&#xff1a;SQL_NO_CACHE&#x548c;SQL_CACHE&#xff0c;&#x5206;&#x522b;&#x4ee3;&#x8868;&#x5f3a;&#x5236;&#x4e0d;&#x4f7f;&#x7528;Query Cache &#x548c;&#x5f3a;&#x5236;&#x4f7f;&#x7528;Query Cache&#x3002;&#xa;&#xff08;2&#xff09;&#x3001;&#x6709;&#x4e9b;SQL &#x7684;Result Set &#x5f88;&#x5927;&#xff0c;&#x5982;&#x679c;&#x4f7f;&#x7528;Query Cache &#x5f88;&#x5bb9;&#x6613;&#x9020;&#x6210;Cache &#x5185;&#x5b58;&#x7684;&#x4e0d;&#x8db3;&#xff0c;&#x6216;&#x8005;&#x5c06;&#x4e4b;&#x524d;&#x4e00;&#x4e9b;&#x8001;&#x7684;Cache &#x51b2;&#x5237;&#x51fa;&#x53bb;&#x3002;&#x5bf9;&#x4e8e;&#x8fd9;&#x4e00;&#x7c7b;Query &#x6211;&#x4eec;&#x6709;&#x4e24;&#x79cd;&#x65b9;&#x6cd5;&#x53ef;&#x4ee5;&#x89e3;&#x51b3;&#xff0c;&#x4e00;&#x662f;&#x4f7f;&#x7528;SQL_NO_CACHE &#x53c2;&#x6570;&#x6765;&#x5f3a;&#x5236;&#x4ed6;&#x4e0d;&#x4f7f;&#x7528;Query Cache &#x800c;&#x6bcf;&#x6b21;&#x90fd;&#x76f4;&#x63a5;&#x4ece;&#x5b9e;&#x9645;&#x6570;&#x636e;&#x4e2d;&#x53bb;&#x67e5;&#x627e;&#xff0c; &#x53e6;&#x4e00;&#x79cd;&#x65b9;&#x6cd5;&#x662f;&#x901a;&#x8fc7;&#x8bbe;&#x5b9a;&#x201c;query_cache_limit&#x201d;&#x53c2;&#x6570;&#x503c;&#x6765;&#x63a7;&#x5236;Query Cache &#x4e2d;&#x6240;Cache &#x7684;&#x6700;&#x5927;Result Set &#xff0c;&#x7cfb;&#x7edf;&#x9ed8;&#x8ba4;&#x4e3a;1M&#xff08;1048576&#xff09;&#x3002;&#x5f53;&#x67d0;&#x4e2a;Query&#x7684;Result Set &#x5927;&#x4e8e;&#x201c;query_cache_limit&#x201d;&#x6240;&#x8bbe;&#x5b9a;&#x7684;&#x503c;&#x7684;&#x65f6;&#x5019;&#xff0c;Query Cache &#x662f;&#x4e0d;&#x4f1a;Cache &#x8fd9;&#x4e2a;Query &#x7684;&#x3002;&#xa;3&#x3001;Query Cache &#x7684;&#x76f8;&#x5173;&#x7cfb;&#x7edf;&#x53c2;&#x6570;&#x53d8;&#x91cf;&#x548c;&#x72b6;&#x6001;&#x53d8;&#x91cf;&#xa;&#xff08;1&#xff09;&#x3001;&#x6211;&#x4eec;&#x9996;&#x5148;&#x770b;&#x770b;Query Cache &#x7684;&#x7cfb;&#x7edf;&#x53d8;&#x91cf;&#xff0c;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;&#x6267;&#x884c;&#x5982;&#x4e0b;&#x547d;&#x4ee4;&#x83b7;&#x5f97;MySQL &#x4e2d;Query Cache &#x76f8;&#x5173;&#x7684;&#x7cfb;&#x7edf;&#x53c2;&#x6570;&#x53d8;&#x91cf;&#xff1a;&#xa;mysql&gt; show variables like &apos;%query_cache%&apos;;&#xa;&#x25cf; &#x201c;have_query_cache&#x201d;&#xff1a;&#x8be5;MySQL &#x662f;&#x5426;&#x652f;&#x6301;Query Cache&#xff1b;&#xa;&#x25cf; &#x201c;query_cache_limit&#x201d;&#xff1a;Query Cache &#x5b58;&#x653e;&#x7684;&#x5355;&#x6761;Query &#x6700;&#x5927;Result Set &#xff0c;&#x9ed8;&#x8ba4;1M&#xff1b;&#xa;&#x25cf; &#x201c;query_cache_min_res_unit&#x201d;&#xff1a;Query Cache &#x6bcf;&#x4e2a;Result Set &#x5b58;&#x653e;&#x7684;&#x6700;&#x5c0f;&#x5185;&#x5b58;&#x5927;&#x5c0f;&#xff0c;&#x9ed8;&#x8ba4;4k&#xff1b;&#xa;&#x25cf; &#x201c;query_cache_size&#x201d;&#xff1a;&#x7cfb;&#x7edf;&#x4e2d;&#x7528;&#x4e8e;Query Cache &#x5185;&#x5b58;&#x7684;&#x5927;&#x5c0f;&#xff1b;&#xa;&#x25cf; &#x201c;query_cache_type&#x201d;&#xff1a;&#x7cfb;&#x7edf;&#x662f;&#x5426;&#x6253;&#x5f00;&#x4e86;Query Cache &#x529f;&#x80fd;&#xff1b;&#xa;&#x25cf; &#x201c;query_cache_wlock_invalidate&#x201d;&#xff1a;&#x9488;&#x5bf9;&#x4e8e;MyISAM &#x5b58;&#x50a8;&#x5f15;&#x64ce;&#xff0c;&#x8bbe;&#x7f6e;&#x5f53;&#x6709;WRITE LOCK &#x5728;&#x67d0;&#x4e2a;Table &#x4e0a;&#x9762;&#x7684;&#x65f6;&#x5019;&#xff0c;&#x8bfb;&#x8bf7;&#x6c42;&#x662f;&#x8981;&#x7b49;&#x5f85;WRITE LOCK &#x91ca;&#x653e;&#x8d44;&#x6e90;&#x4e4b;&#x540e;&#x518d;&#x67e5;&#x8be2;&#x8fd8;&#x662f;&#x5141;&#x8bb8;&#x76f4;&#x63a5;&#x4ece;Query Cache &#x4e2d;&#x8bfb;&#x53d6;&#x7ed3;&#x679c;&#xff0c;&#x9ed8;&#x8ba4;&#x4e3a;FALSE&#xff08;&#x53ef;&#x4ee5;&#x76f4;&#x63a5;&#x4ece;Query Cache &#x4e2d;&#x53d6;&#x5f97;&#x7ed3;&#x679c;&#xff09;&#x3002;&#xa;&#xff08;2&#xff09;&#x3001;&#x5982;&#x679c;&#x6211;&#x4eec;&#x8981;&#x4e86;&#x89e3;Query Cache &#x7684;&#x4f7f;&#x7528;&#x60c5;&#x51b5;&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x901a;&#x8fc7;Query Cache &#x76f8;&#x5173;&#x7684;&#x72b6;&#x6001;&#x53d8;&#x91cf;&#x6765;&#x83b7;&#x53d6;&#xff0c;&#x5982;&#x901a;&#x8fc7;&#x5982;&#x4e0b;&#x547d;&#x4ee4;&#xff1a;&#xa;mysql&gt; show status like &apos;Qcache%&apos;;&#xa;&#x25cf; &#x201c;Qcache_free_blocks&#x201d;&#xff1a;Query Cache &#x4e2d;&#x76ee;&#x524d;&#x8fd8;&#x6709;&#x591a;&#x5c11;&#x5269;&#x4f59;&#x7684;blocks&#x3002;&#x5982;&#x679c;&#x8be5;&#x503c;&#x663e;&#x793a;&#x8f83;&#x5927;&#xff0c;&#x5219;&#x8bf4;&#x660e;Query Cache &#x4e2d;&#x7684;&#x5185;&#x5b58;&#x788e;&#x7247;&#x8f83;&#x591a;&#x4e86;&#xff0c;&#x53ef;&#x80fd;&#x9700;&#x8981;&#x5bfb;&#x627e;&#x5408;&#x9002;&#x7684;&#x673a;&#x4f1a;&#x8fdb;&#x884c;&#x6574;&#x7406;&#x3002;&#xa;&#x25cf; &#x201c;Qcache_free_memory&#x201d;&#xff1a;Query Cache &#x4e2d;&#x76ee;&#x524d;&#x5269;&#x4f59;&#x7684;&#x5185;&#x5b58;&#x5927;&#x5c0f;&#x3002;&#x901a;&#x8fc7;&#x8fd9;&#x4e2a;&#x53c2;&#x6570;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x8f83;&#x4e3a;&#x51c6;&#x786e;&#x7684;&#x89c2;&#x5bdf;&#x51fa;&#x5f53;&#x524d;&#x7cfb;&#x7edf;&#x4e2d;&#x7684;Query Cache &#x5185;&#x5b58;&#x5927;&#x5c0f;&#x662f;&#x5426;&#x8db3;&#x591f;&#xff0c;&#x662f;&#x9700;&#x8981;&#x589e;&#x52a0;&#x8fd8;&#x662f;&#x8fc7;&#x591a;&#x4e86;&#xff1b;&#xa;&#x25cf; &#x201c;Qcache_hits&#x201d;&#xff1a;&#x591a;&#x5c11;&#x6b21;&#x547d;&#x4e2d;&#x3002;&#x901a;&#x8fc7;&#x8fd9;&#x4e2a;&#x53c2;&#x6570;&#x6211;&#x4eec;&#x53ef;&#x4ee5;&#x67e5;&#x770b;&#x5230;Query Cache &#x7684;&#x57fa;&#x672c;&#x6548;&#x679c;&#xff1b;&#xa;&#x25cf; &#x201c;Qcache_inserts&#x201d;&#xff1a;&#x591a;&#x5c11;&#x6b21;&#x672a;&#x547d;&#x4e2d;&#x7136;&#x540e;&#x63d2;&#x5165;&#x3002;&#x901a;&#x8fc7;&#x201c;Qcache_hits&#x201d;&#x548c;&#x201c;Qcache_inserts&#x201d;&#x4e24;&#x4e2a;&#x53c2;&#x6570;&#x6211;&#x4eec;&#x5c31;&#x53ef;&#x4ee5;&#x7b97;&#x51fa;Query Cache &#x7684;&#x547d;&#x4e2d;&#x7387;&#x4e86;&#xff1a;Query Cache &#x547d;&#x4e2d;&#x7387;= Qcache_hits / ( Qcache_hits +Qcache_inserts )&#xff1b;&#xa;&#x25cf; &#x201c;Qcache_lowmem_prunes&#x201d;&#xff1a;&#x591a;&#x5c11;&#x6761;Query &#x56e0;&#x4e3a;&#x5185;&#x5b58;&#x4e0d;&#x8db3;&#x800c;&#x88ab;&#x6e05;&#x9664;&#x51fa;Query Cache&#x3002;&#x901a;&#x8fc7;&#x201c;Qcache_lowmem_prunes&#x201d;&#x548c;&#x201c;Qcache_free_memory&#x201d;&#x76f8;&#x4e92;&#x7ed3;&#x5408;&#xff0c;&#x80fd;&#x591f;&#x66f4;&#x6e05;&#x695a;&#x7684;&#x4e86;&#x89e3;&#x5230;&#x6211;&#x4eec;&#x7cfb;&#x7edf;&#x4e2d;Query Cache &#x7684;&#x5185;&#x5b58;&#x5927;&#x5c0f;&#x662f;&#x5426;&#x771f;&#x7684;&#x8db3;&#x591f;&#xff0c;&#x662f;&#x5426;&#x975e;&#x5e38;&#x9891;&#x7e41;&#x7684;&#x51fa;&#x73b0;&#x56e0;&#x4e3a;&#x5185;&#x5b58;&#x4e0d;&#x8db3;&#x800c;&#x6709;Query &#x88ab;&#x6362;&#x51fa;&#xa;&#x25cf; &#x201c;Qcache_not_cached&#x201d;&#xff1a;&#x56e0;&#x4e3a;query_cache_type &#x7684;&#x8bbe;&#x7f6e;&#x6216;&#x8005;&#x4e0d;&#x80fd;&#x88ab;cache &#x7684;Query &#x7684;&#x6570;&#x91cf;&#xff1b;&#xa;&#x25cf; &#x201c;Qcache_queries_in_cache&#x201d;&#xff1a;&#x5f53;&#x524d;Query Cache &#x4e2d;cache &#x7684;Query &#x6570;&#x91cf;&#xff1b;&#xa;&#x25cf; &#x201c;Qcache_total_blocks&#x201d;&#xff1a;&#x5f53;&#x524d;Query Cache &#x4e2d;&#x7684;block &#x6570;&#x91cf;&#xff1b;&#xa;4&#x3001;Query Cache &#x7684;&#x9650;&#x5236;&#xa;&#xff08;1&#xff09;&#x3001;Query Cache &#x7531;&#x4e8e;&#x5b58;&#x653e;&#x7684;&#x90fd;&#x662f;&#x903b;&#x8f91;&#x7ed3;&#x6784;&#x7684;Result Set&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x7269;&#x7406;&#x7684;&#x6570;&#x636e;&#x9875;&#xff0c;&#x6240;&#x4ee5;&#x5728;&#x6027;&#x80fd;&#x63d0;&#x5347;&#x7684;&#x540c;&#x65f6;&#xff0c;&#x4e5f;&#x4f1a;&#x53d7;&#x5230;&#x4e00;&#x4e9b;&#x7279;&#x5b9a;&#x7684;&#x9650;&#x5236;&#x3002;&#xa;a) 5.1.17 &#x4e4b;&#x524d;&#x7684;&#x7248;&#x672c;&#x4e0d;&#x80fd;Cache &#x5e2e;&#x5b9a;&#x53d8;&#x91cf;&#x7684;Query&#xff0c;&#x4f46;&#x662f;&#x4ece;5.1.17 &#x7248;&#x672c;&#x5f00;&#x59cb;&#xff0c;Query Cache &#x5df2;&#x7ecf;&#x5f00;&#x59cb;&#x652f;&#x6301;&#x5e2e;&#x5b9a;&#x53d8;&#x91cf;&#x7684;Query &#x4e86;&#xff1b;&#xa;b) &#x6240;&#x6709;&#x5b50;&#x67e5;&#x8be2;&#x4e2d;&#x7684;&#x5916;&#x90e8;&#x67e5;&#x8be2;SQL &#x4e0d;&#x80fd;&#x88ab;Cache&#xff1b;&#xa;c) &#x5728;Procedure&#xff0c;Function &#x4ee5;&#x53ca;Trigger &#x4e2d;&#x7684;Query &#x4e0d;&#x80fd;&#x88ab;Cache&#xff1b;&#xa;d) &#x5305;&#x542b;&#x5176;&#x4ed6;&#x5f88;&#x591a;&#x6bcf;&#x6b21;&#x6267;&#x884c;&#x53ef;&#x80fd;&#x5f97;&#x5230;&#x4e0d;&#x4e00;&#x6837;&#x7ed3;&#x679c;&#x7684;&#x51fd;&#x6570;&#x7684;Query &#x4e0d;&#x80fd;&#x88ab;Cache&#x3002;&#xa;&#xff08;2&#xff09;&#x3001;&#x9274;&#x4e8e;&#x4e0a;&#x9762;&#x7684;&#x8fd9;&#x4e9b;&#x9650;&#x5236;&#xff0c;&#x5728;&#x4f7f;&#x7528;Query Cache &#x7684;&#x8fc7;&#x7a0b;&#x4e2d;&#xff0c;&#x5efa;&#x8bae;&#x901a;&#x8fc7;&#x7cbe;&#x786e;&#x8bbe;&#x7f6e;&#x7684;&#x65b9;&#x5f0f;&#x6765;&#x4f7f;&#x7528;&#xff0c;&#x4ec5;&#x4ec5;&#x8ba9;&#x5408;&#x9002;&#x7684;&#x8868;&#x7684;&#x6570;&#x636e;&#x53ef;&#x4ee5;&#x8fdb;&#x5165;Query Cache&#xff0c;&#x4ec5;&#x4ec5;&#x8ba9;&#x67d0;&#x4e9b;Query &#x7684;&#x67e5;&#x8be2;&#x7ed3;&#x679c;&#x88ab;Cache&#x3002;"/>
<node CREATED="1309680942062" ID="Freemind_Link_1779175588" MODIFIED="1309682387046" POSITION="right" TEXT="MySQL Server &#x5176;&#x4ed6;&#x5e38;&#x7528;&#x4f18;&#x5316;&#xa;1&#x3001;&#x7f51;&#x7edc;&#x8fde;&#x63a5;&#x548c;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#xa;&#xff08;1&#xff09;&#x3001;&#x4e0e;&#x7f51;&#x7edc;&#x8fde;&#x63a5;&#x7684;&#x6027;&#x80fd;&#x914d;&#x7f6e;&#x9879;&#x53ca;&#x5bf9;&#x6027;&#x80fd;&#x7684;&#x5f71;&#x54cd;&#x3002;&#xa;&#x25cf; max_conecctions&#xff1a;&#x6574;&#x4e2a;MySQL &#x5141;&#x8bb8;&#x7684;&#x6700;&#x5927;&#x8fde;&#x63a5;&#x6570;&#xff1b;&#xa;&#x25cf; max_user_connections&#xff1a;&#x6bcf;&#x4e2a;&#x7528;&#x6237;&#x5141;&#x8bb8;&#x7684;&#x6700;&#x5927;&#x8fde;&#x63a5;&#x6570;&#xff1b;&#xa;&#x25cf; net_buffer_length&#xff1a;&#x7f51;&#x7edc;&#x5305;&#x4f20;&#x8f93;&#x4e2d;&#xff0c;&#x4f20;&#x8f93;&#x6d88;&#x606f;&#x4e4b;&#x524d;&#x7684;net buffer &#x521d;&#x59cb;&#x5316;&#x5927;&#x5c0f;&#xff1b;&#xa;&#x25cf; max_allowed_packet&#xff1a;&#x5728;&#x7f51;&#x7edc;&#x4f20;&#x8f93;&#x4e2d;&#xff0c;&#x4e00;&#x6b21;&#x4f20;&#x8f93;&#x6d88;&#x606f;&#x91cf;&#x7684;&#x6700;&#x5927;&#x503c;&#xff1b;&#xa;&#x25cf; back_log&#xff1a;&#x5728;MySQL &#x7684;&#x8fde;&#x63a5;&#x8bf7;&#x6c42;&#x7b49;&#x5f85;&#x961f;&#x5217;&#x4e2d;&#x5141;&#x8bb8;&#x5b58;&#x653e;&#x7684;&#x6700;&#x5927;&#x8fde;&#x63a5;&#x8bf7;&#x6c42;&#x6570;&#x3002;&#xa;&#xff08;2&#xff09;&#x3001;&#x5728;MySQL &#x4e2d;&#xff0c;&#x4e3a;&#x4e86;&#x5c3d;&#x53ef;&#x63d0;&#x9ad8;&#x5ba2;&#x6237;&#x7aef;&#x8bf7;&#x6c42;&#x521b;&#x5efa;&#x8fde;&#x63a5;&#x8fd9;&#x4e2a;&#x8fc7;&#x7a0b;&#x7684;&#x6027;&#x80fd;&#xff0c;&#x5b9e;&#x73b0;&#x4e86;&#x4e00;&#x4e2a;Thread Cache &#x6c60;&#xff0c;&#x5c06;&#x7a7a;&#x95f2;&#x7684;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#x5b58;&#x653e;&#x5728;&#x5176;&#x4e2d;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x5b8c;&#x6210;&#x8bf7;&#x6c42;&#x540e;&#x5c31;&#x9500;&#x6bc1;&#x3002;&#x8fd9;&#x6837;&#xff0c;&#x5f53;&#x6709;&#x65b0;&#x7684;&#x8fde;&#x63a5;&#x8bf7;&#x6c42;&#x7684;&#x65f6;&#x5019;&#xff0c;MySQL &#x9996;&#x5148;&#x4f1a;&#x68c0;&#x67e5;Thread Cache &#x6c60;&#x4e2d;&#x662f;&#x5426;&#x5b58;&#x5728;&#x7a7a;&#x95f2;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#xff0c;&#x5982;&#x679c;&#x5b58;&#x5728;&#x5219;&#x53d6;&#x51fa;&#x6765;&#x76f4;&#x63a5;&#x4f7f;&#x7528;&#xff0c;&#x5982;&#x679c;&#x6ca1;&#x6709;&#x7a7a;&#x95f2;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#xff0c;&#x624d;&#x521b;&#x5efa;&#x65b0;&#x7684;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#x3002;&#x5728;MySQL &#x4e2d;&#x4e0e;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#x76f8;&#x5173;&#x7684;&#x7cfb;&#x7edf;&#x53c2;&#x6570;&#x53ca;&#x72b6;&#x6001;&#x53d8;&#x91cf;&#x8bf4;&#x660e;&#x5982;&#x4e0b;&#xff1a;&#xa;&#x25cf; thread_cache_size&#xff1a;Thread Cache &#x6c60;&#x4e2d;&#x5e94;&#x8be5;&#x5b58;&#x653e;&#x7684;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#x6570;&#x3002;&#xa;&#x25cf; thread_stack&#xff1a;&#x6bcf;&#x4e2a;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#x88ab;&#x521b;&#x5efa;&#x7684;&#x65f6;&#x5019;&#xff0c;MySQL &#x7ed9;&#x4ed6;&#x5206;&#x914d;&#x7684;&#x5185;&#x5b58;&#x5927;&#x5c0f;&#x3002;&#xa;&#xff08;3&#xff09;&#x3001;&#x6211;&#x4eec;&#x73b0;&#x770b;&#x770b;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#x76f8;&#x5173;&#x7684;&#x7cfb;&#x7edf;&#x53d8;&#x91cf;&#x7684;&#x8bbe;&#x7f6e;&#x503c;&#xff1a;&#xa;mysql&gt; show variables like &apos;thread%&apos;;&#xa;&#xff08;4&#xff09;&#x3001;&#x518d;&#x6765;&#x770b;&#x4e00;&#x4e0b;&#x7cfb;&#x7edf;&#x88ab;&#x8fde;&#x63a5;&#x7684;&#x6b21;&#x6570;&#x4ee5;&#x53ca;&#x5f53;&#x524d;&#x7cfb;&#x7edf;&#x4e2d;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#x7684;&#x72b6;&#x6001;&#x503c;&#xff1a;&#xa;mysql&gt; show status like &apos;connections&apos;;&#xa;mysql&gt; show status like &apos;%thread%&apos;;&#xa;2&#x3001;Table Cache &#x76f8;&#x5173;&#x7684;&#x4f18;&#x5316;&#xa;&#xff08;1&#xff09;&#x3001;&#x6211;&#x4eec;&#x5148;&#x6765;&#x770b;&#x4e00;&#x4e0b;MySQL &#x6253;&#x5f00;&#x8868;&#x7684;&#x76f8;&#x5173;&#x673a;&#x5236;&#x3002;&#x7531;&#x4e8e;&#x591a;&#x7ebf;&#x7a0b;&#x7684;&#x5b9e;&#x73b0;&#x673a;&#x5236;&#xff0c;&#x4e3a;&#x4e86;&#x5c3d;&#x53ef;&#x80fd;&#x7684;&#x63d0;&#x9ad8;&#x6027;&#x80fd;&#xff0c;&#x5728;MySQL &#x4e2d;&#x6bcf;&#x4e2a;&#x7ebf;&#x7a0b;&#x90fd;&#x662f;&#x72ec;&#x7acb;&#x7684;&#x6253;&#x5f00;&#x81ea;&#x5df1;&#x9700;&#x8981;&#x7684;&#x8868;&#x7684;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#xff0c;&#x800c;&#x4e0d;&#x662f;&#x901a;&#x8fc7;&#x5171;&#x4eab;&#x5df2;&#x7ecf;&#x6253;&#x5f00;&#x7684;&#x8868;&#x7684;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x7684;&#x673a;&#x5236;&#x6765;&#x5b9e;&#x73b0;&#x3002;&#x5f53;&#x7136;&#xff0c;&#x9488;&#x5bf9;&#x4e8e;&#x4e0d;&#x540c;&#x7684;&#x5b58;&#x50a8;&#x5f15;&#x64ce;&#x53ef;&#x80fd;&#x6709;&#x4e0d;&#x540c;&#x7684;&#x5904;&#x7406;&#x65b9;&#x5f0f;&#x3002;&#x5982;MyISAM &#x8868;&#xff0c;&#x6bcf;&#x4e00;&#x4e2a;&#x5ba2;&#x6237;&#x7aef;&#x7ebf;&#x7a0b;&#x6253;&#x5f00;&#x4efb;&#x4f55;&#x4e00;&#x4e2a;MyISAM &#x8868;&#x7684;&#x6570;&#x636e;&#x6587;&#x4ef6;&#x90fd;&#x9700;&#x8981;&#x6253;&#x5f00;&#x4e00;&#x4e2a;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#xff0c;&#x4f46;&#x5982;&#x679c;&#x662f;&#x7d22;&#x5f15;&#x6587;&#x4ef6;&#xff0c;&#x5219;&#x53ef;&#x4ee5;&#x591a;&#x4e2a;&#x7ebf;&#x7a0b;&#x5171;&#x4eab;&#x540c;&#x4e00;&#x4e2a;&#x7d22;&#x5f15;&#x6587;&#x4ef6;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x3002;&#x5bf9;&#x4e8e;Innodb &#x7684;&#x5b58;&#x50a8;&#x5f15;&#x64ce;&#xff0c;&#x5982;&#x679c;&#x6211;&#x4eec;&#x4f7f;&#x7528;&#x7684;&#x662f;&#x5171;&#x4eab;&#x8868;&#x7a7a;&#x95f4;&#x6765;&#x5b58;&#x50a8;&#x6570;&#x636e;&#xff0c;&#x90a3;&#x4e48;&#x6211;&#x4eec;&#x9700;&#x8981;&#x6253;&#x5f00;&#x7684;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x5c31;&#x6bd4;&#x8f83;&#x5c11;&#xff0c;&#x800c;&#x5982;&#x679c;&#x6211;&#x4eec;&#x4f7f;&#x7528;&#x7684;&#x662f;&#x72ec;&#x4eab;&#x8868;&#x7a7a;&#x95f4;&#x65b9;&#x5f0f;&#x6765;&#x5b58;&#x50a8;&#x6570;&#x636e;&#xff0c;&#x5219;&#x540c;&#x6837;&#xff0c;&#x7531;&#x4e8e;&#x5b58;&#x50a8;&#x8868;&#x6570;&#x636e;&#x7684;&#x6570;&#x636e;&#x6587;&#x4ef6;&#x8f83;&#x591a;&#xff0c;&#x5219;&#x540c;&#x6837;&#x4f1a;&#x6253;&#x5f00;&#x5f88;&#x591a;&#x7684;&#x8868;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x3002;&#x9664;&#x4e86;&#x6570;&#x636e;&#x5e93;&#x7684;&#x5b9e;&#x9645;&#x8868;&#x6216;&#x8005;&#x7d22;&#x5f15;&#x6253;&#x5f00;&#x4ee5;&#x5916;&#xff0c;&#x4e34;&#x65f6;&#x6587;&#x4ef6;&#x540c;&#x6837;&#x4e5f;&#x9700;&#x8981;&#x4f7f;&#x7528;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#xff0c;&#x540c;&#x6837;&#x4f1a;&#x5360;&#x7528;&#x7cfb;&#x7edf;&#x4e2d;open_files_limit &#x7684;&#x8bbe;&#x7f6e;&#x9650;&#x989d;&#x3002;&#xa;&#xff08;2&#xff09;&#x3001;&#x4e3a;&#x4e86;&#x89e3;&#x51b3;&#x6253;&#x5f00;&#x8868;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x592a;&#x8fc7;&#x9891;&#x7e41;&#x7684;&#x95ee;&#x9898;&#xff0c;MySQL &#x5728;&#x7cfb;&#x7edf;&#x4e2d;&#x5b9e;&#x73b0;&#x4e86;&#x4e00;&#x4e2a;Table Cache &#x7684;&#x673a;&#x5236;&#xff0c;&#x548c;&#x524d;&#x9762;&#x4ecb;&#x7ecd;&#x7684;Thread Cache &#x673a;&#x5236;&#x6709;&#x70b9;&#x7c7b;&#x4f3c;&#xff0c;&#x4e3b;&#x8981;&#x5c31;&#x662f;Cache &#x6253;&#x5f00;&#x7684;&#x6240;&#x6709;&#x8868;&#x6587;&#x4ef6;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#xff0c;&#x5f53;&#x6709;&#x65b0;&#x7684;&#x8bf7;&#x6c42;&#x7684;&#x65f6;&#x5019;&#x4e0d;&#x9700;&#x8981;&#x518d;&#x91cd;&#x65b0;&#x6253;&#x5f00;&#xff0c;&#x4f7f;&#x7528;&#x7ed3;&#x675f;&#x7684;&#x65f6;&#x5019;&#x4e5f;&#x4e0d;&#x7528;&#x7acb;&#x5373;&#x5173;&#x95ed;&#x3002;&#x901a;&#x8fc7;&#x8fd9;&#x6837;&#x7684;&#x65b9;&#x5f0f;&#x6765;&#x51cf;&#x5c11;&#x56e0;&#x4e3a;&#x9891;&#x7e41;&#x6253;&#x5f00;&#x5173;&#x95ed;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#x6240;&#x5e26;&#x6765;&#x7684;&#x8d44;&#x6e90;&#x6d88;&#x8017;&#x3002;&#x6211;&#x4eec;&#x5148;&#x770b;&#x4e00;&#x770b;Table Cache &#x76f8;&#x5173;&#x7684;&#x7cfb;&#x7edf;&#x53c2;&#x6570;&#x53ca;&#x72b6;&#x6001;&#x53d8;&#x91cf;&#x3002;&#xa;mysql&gt; show variables like &apos;table_cache&apos;;&#xa;mysql&gt; show status like &apos;open_tables&apos;;&#xa;&#xff08;3&#xff09;&#x3001;&#x90a3;&#x4e48;Table Cache &#x6c60;&#x4e2d;Cache &#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x5728;&#x4ec0;&#x4e48;&#x60c5;&#x51b5;&#x4e0b;&#x4f1a;&#x88ab;&#x5173;&#x95ed;&#x5462;&#xff1f;&#x4e00;&#x822c;&#x6765;&#x8bf4;&#x4e3b;&#x8981;&#x6709;&#x4ee5;&#x4e0b;&#x96c6;&#x4e2d;&#x60c5;&#x51b5;&#x4f1a;&#x51fa;&#x73b0;&#x88ab;Cache &#x7684;&#x63cf;&#x8ff0;&#x7b26;&#x88ab;&#x5173;&#x95ed;&#xff1a;&#xa;a) Table Cache &#x7684;Cache&#x6c60;&#x6ee1;&#x4e86;&#xff0c;&#x800c;&#x67d0;&#x4e2a;&#x8fde;&#x63a5;&#x7ebf;&#x7a0b;&#x9700;&#x8981;&#x6253;&#x5f00;&#x67d0;&#x4e2a;&#x4e0d;&#x5728;Table Cache &#x4e2d;&#x7684;&#x8868;&#x65f6;&#xff0c;MySQL&#x4f1a;&#x901a;&#x8fc7;&#x4e00;&#x5b9a;&#x7684;&#x7b97;&#x6cd5;&#x5173;&#x95ed;&#x67d0;&#x4e9b;&#x6ca1;&#x6709;&#x5728;&#x4f7f;&#x7528;&#x4e2d;&#x7684;&#x63cf;&#x8ff0;&#x7b26;&#xff1b;&#xa;b) &#x5f53;&#x6211;&#x4eec;&#x6267;&#x884c;Flush Table &#x7b49;&#x547d;&#x4ee4;&#x7684;&#x65f6;&#x5019;&#xff0c;MySQL &#x4f1a;&#x5173;&#x95ed;&#x5f53;&#x524d;Table Cache &#x4e2d;Cache &#x7684;&#x6240;&#x6709;&#x6587;&#x4ef6;&#x63cf;&#x8ff0;&#x7b26;&#xff1b;&#xa;c) &#x5f53;Table Cache &#x4e2d;Cache &#x7684;&#x91cf;&#x8d85;&#x8fc7;table_cache &#x53c2;&#x6570;&#x8bbe;&#x7f6e;&#x7684;&#x503c;&#x7684;&#x65f6;&#x5019;&#xff1b;&#xa;3&#x3001;Sort Buffer&#xff0c;Join Buffer &#x548c;Read Buffer&#xa;&#xff08;1&#xff09;&#x3001;&#x5728;MySQL &#x4e2d;&#xff0c;&#x4e4b;&#x524d;&#x4ecb;&#x7ecd;&#x7684;&#x591a;&#x79cd;Cache &#x4e4b;&#x5916;&#xff0c;&#x8fd8;&#x6709;&#x5728;Query &#x6267;&#x884c;&#x8fc7;&#x7a0b;&#x4e2d;&#x7684;&#x4e24;&#x79cd;Buffer &#x4f1a;&#x5bf9;&#x6570;&#x636e;&#x5e93;&#x7684;&#x6574;&#x4f53;&#x6027;&#x80fd;&#x4ea7;&#x751f;&#x5f71;&#x54cd;&#x3002;&#xa;mysql&gt; show variables like &apos;%buffer%&apos;;&#xa;&#x25cf; join_buffer_size &#xff1a;&#x5f53;&#x6211;&#x4eec;&#x7684;Join &#x662f;ALL &#xff0c; index &#xff0c;rang &#x6216;&#x8005;index_merge &#x7684;&#x65f6;&#x5019;&#x4f7f;&#x7528;&#x7684;Buffer&#xff1b;&#xa;&#x25cf; sort_buffer_size&#xff1a;&#x7cfb;&#x7edf;&#x4e2d;&#x5bf9;&#x6570;&#x636e;&#x8fdb;&#x884c;&#x6392;&#x5e8f;&#x7684;&#x65f6;&#x5019;&#x4f7f;&#x7528;&#x7684;Buffer&#xff1b;"/>
</node>
</map>
